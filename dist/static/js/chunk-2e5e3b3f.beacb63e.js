(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e5e3b3f"],{3101:function(e,t,r){},"735d":function(e,t,r){"use strict";r("3101")},"9ed6":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules}},[r("h3",{staticClass:"title"},[e._v(e._s(e.$t("login.title")))]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:e.$t("login.username")},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:e.$t("login.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),r("el-form-item",{attrs:{prop:"captcha"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:e.$t("login.captcha")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),r("div",{staticClass:"login-code"},[r("img",{staticClass:"login-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(e._s(e.$t("reg.regBtn")))]),r("el-button",{staticStyle:{float:"right"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(" "+e._s(e.$t("login.loginBtn"))+" ")])],1),r("lang-select",{staticClass:"right-menu-item hover-effect"})],1),r("el-dialog",{attrs:{title:e.$t("reg.title"),visible:e.dialogFormVisible,"before-close":e.regInit,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"25%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.regRules}},[r("el-form-item",{attrs:{label:e.$t("reg.username"),"label-width":e.formLabelWidth,prop:"username"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:e.$t("reg.email"),"label-width":e.formLabelWidth,prop:"email"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("el-form-item",{attrs:{label:e.$t("reg.password"),"label-width":e.formLabelWidth,prop:"password"}},[r("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:e.$t("reg.repassword"),"label-width":e.formLabelWidth,prop:"repassword"}},[r("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.form.repassword,callback:function(t){e.$set(e.form,"repassword",t)},expression:"form.repassword"}})],1),r("el-form-item",{attrs:{label:e.$t("reg.code"),"label-width":e.formLabelWidth,prop:"code"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:e.$t("reg.captcha"),"label-width":e.formLabelWidth,prop:"captcha"}},[r("el-col",{attrs:{span:16}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.captcha,callback:function(t){e.$set(e.form,"captcha",t)},expression:"form.captcha"}})],1),r("el-col",{attrs:{span:8}},[r("img",{staticClass:"login-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{loading:e.loading,type:"primary",size:"medium"},nativeOn:{click:function(t){return t.preventDefault(),e.handleReg(t)}}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),r("div",{staticClass:"el-login-footer"})],1)},a=[],s=r("b775");function i(e){return Object(s["a"])({url:"/api/register",method:"post",data:e})}var l=r("1131"),n={name:"Login",components:{LangSelect:l["a"]},data:function(){var e=this,t=function(t,r,o){null===r||r.length<8?o(new Error(e.$t("reg.valid.password"))):o()},r=function(t,r,o){null===r||r.length<8?o(new Error(e.$t("reg.valid.password"))):r!==e.form.password?o(new Error(e.$t("reg.valid.rePwd"))):o()};return{dialogFormVisible:!1,formLabelWidth:"110px",form:{username:"",password:"",repassword:"",email:"",captcha:"",code:""},codeUrl:"/v1/api/captcha?t="+Math.random(),loginForm:{username:"",password:"",captcha:""},loginRules:{username:[{required:!0,trigger:"blur",message:this.$t("login.valid.username")}],password:[{required:!0,trigger:"blur",message:this.$t("login.valid.password")}],captcha:[{required:!0,trigger:"blur",message:this.$t("login.valid.captcha")}]},regRules:{username:[{required:!0,trigger:"blur",message:this.$t("reg.valid.username")}],password:[{required:!0,trigger:"blur",validator:t}],repassword:[{required:!0,trigger:"blur",validator:r}],captcha:[{required:!0,trigger:"blur",message:this.$t("reg.valid.captcha")}],code:[{required:!0,trigger:"blur",message:this.$t("reg.valid.code")}],email:[{required:!0,trigger:"blur",message:this.$t("reg.valid.email")},{type:"email",message:this.$t("reg.valid.emailErr"),trigger:["blur","change"]}]},loading:!1,passwordType:"password",redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},beforeMount:function(){},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))},handleReg:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.loading=!0,i({userName:e.form.username,passWord:e.form.password,email:e.form.email,captcha:e.form.captcha,regCode:e.form.code}).then((function(t){t.success?e.$message({message:t.respMsg,type:"success",duration:1e3,onClose:e.regInit}):e.loading=!1}))}))},regInit:function(){this.loading=!1,this.dialogFormVisible=!1,this.form={username:"",password:"",repassword:"",email:"",captcha:""}},getCode:function(){this.codeUrl="/v1/api/captcha?t="+Math.random()}}},c=n,d=(r("735d"),r("2877")),m=Object(d["a"])(c,o,a,!1,null,null,null);t["default"]=m.exports}}]);